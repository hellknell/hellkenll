{"version":3,"file":"js/511.18a847d6.js","mappings":"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","sources":["webpack://admin/./src/util/request.js","webpack://admin/./src/views/main/TrainSeatView.vue","webpack://admin/./src/views/main/TrainSeatView.vue?1f33"],"sourcesContent":["import axios from 'axios'\r\n// import store from \"@/store\";\r\n// import {notification} from \"ant-design-vue\";\r\n// import router from \"@/router\";\r\n\r\n// 创建可一个新的axios对象\r\nconst request = axios.create({\r\n    baseURL: process.env.VUE_APP_BASEURL,   // 后端的接口地址  ip:port\r\n    timeout: 30000                          // 30s请求超时\r\n})\r\n\r\n// request 拦截器\r\n// 可以自请求发送前对请求做一些处理\r\n// 比如统一加token，对请求参数统一加密\r\nrequest.interceptors.request.use(config => {\r\n    // config.headers['Content-Type'] = 'application/json;charset=utf-8';\r\n    // let member = JSON.parse(localStorage.getItem('member')) || ''\r\n    // config.headers.token = member.token || '';\r\n    return config\r\n}, error => {\r\n    console.error('request error: ' + error) // for debug\r\n    return Promise.reject(error)\r\n});\r\n\r\n// response 拦截器\r\n// 可以在接口响应后统一处理结果\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n        // if (typeof res === 'string') {\r\n        //     res = res ? JSON.parse(res) : res\r\n        // }\r\n        // if (res.code === \"401\") {\r\n        //     store.commit(\"setMember\", {});\r\n        //     notification.error({\r\n        //         message: '错误',\r\n        //         description: '登录已过期，请重新登录',\r\n        //     })\r\n        //     router.push('/login')\r\n        // }\r\n        // return res;\r\n        return res\r\n    },\r\n    error => {\r\n        console.error('response error: ' + error) // for debug\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default request","<template>\r\n  <p>\r\n    <a-space :size=\"14\" style=\"display: flex;justify-content: flex-start\">\r\n      <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\r\n      <a-button type=\"primary\" danger @click=\"onAdd\">新增</a-button>\r\n    </a-space>\r\n  </p>\r\n  <a-table :dataSource=\"trainSeats\"\r\n           :columns=\"columns\"\r\n           :pagination=\"pagination\"\r\n           @change=\"handleTableChange\"\r\n           :loading=\"loading\">\r\n    <template #bodyCell=\"{ column, record }\">\r\n      <template v-if=\"column.dataIndex === 'operation'\">\r\n        <a-space>\r\n          <a-popconfirm\r\n              title=\"删除后不可恢复，确认删除?\"\r\n              @confirm=\"onDelete(record)\"\r\n              ok-text=\"确认\" cancel-text=\"取消\">\r\n            <a style=\"color: red\">删除</a>\r\n          </a-popconfirm>\r\n          <a @click=\"onEdit(record)\">编辑</a>\r\n        </a-space>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'seatType'\">\r\n        <span v-for=\"item in SEAT_TYPE_ARRAY\" :key=\"item\">\r\n          <span v-if=\"item.type === record.seatType\">\r\n            {{ item.desc }}\r\n          </span>\r\n        </span>\r\n      </template>\r\n    </template>\r\n  </a-table>\r\n  <a-modal v-model:visible=\"visible\" title=\"座位\" @ok=\"handleOk\"\r\n           ok-text=\"确认\" cancel-text=\"取消\">\r\n    <a-form :model=\"trainSeat\" :label-col=\"{span: 4}\" :wrapper-col=\"{ span: 20 }\">\r\n      <a-form-item label=\"车次编号\">\r\n        <a-input v-model:value=\"trainSeat.trainCode\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"厢序\">\r\n        <a-input v-model:value=\"trainSeat.carriageIndex\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"座位类型\">\r\n        <a-select v-model:value=\"trainSeat.seatType\" @change=\"updateCols(trainSeat.seatType)\">\r\n          <a-select-option v-for=\"(item,index) in SEAT_TYPE_ARRAY \" :key=\"index\" :value=\"item.type\">\r\n            {{ item.desc }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n      <a-form-item label=\"排号\">\r\n        <a-input v-model:value=\"trainSeat.row\" :disabled=\"trainSeat.seatType==='3'|| trainSeat.seatType==='4'\"/>\r\n      </a-form-item>\r\n      <a-form-item label=\"列号\">\r\n        <a-select v-model:value=\"trainSeat.col\">\r\n          <a-select-option v-for=\"item in Cols\" :key=\"item\" :value=\"item\">\r\n            {{ item }}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"同车厢座序\">\r\n        <a-input v-model:value=\"trainSeat.carriageSeatIndex\"/>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref} from 'vue';\r\nimport request from \"@/util/request\";\r\nimport {notification} from \"ant-design-vue\";\r\n\r\nconst visible = ref(false);\r\nlet trainSeat = ref({\r\n  id: undefined,\r\n  trainCode: undefined,\r\n  carriageIndex: undefined,\r\n  row: undefined,\r\n  col: undefined,\r\n  seatType: undefined,\r\n  carriageSeatIndex: undefined,\r\n  createTime: undefined,\r\n  updateTime: undefined,\r\n});\r\nconst SEAT_TYPE_ARRAY = ref([\r\n  {\r\n    type: \"1\",\r\n    desc: \"一等座\"\r\n  }, {\r\n    type: \"2\",\r\n    desc: \"二等座\"\r\n  },\r\n  {\r\n    type: \"3\",\r\n    desc: \"硬卧\"\r\n  },\r\n  {\r\n    type: \"4\",\r\n    desc: \"软卧\"\r\n  }\r\n])\r\nconst Cols = ref([])\r\n\r\n\r\nconst updateCols = (type) => {\r\n\r\n  request.get(\"/admin/train-seat/query-seat-col/\" + type).then(res => {\r\n    if (res.success ){\r\n      Cols.value = res.data\r\n\r\n    }\r\n  })\r\n}\r\nconst trainSeats = ref([]);\r\n// 分页的三个属性名是固定的\r\nconst pagination = ref({\r\n  total: 0,\r\n  current: 1,\r\n  pageSize: 10,\r\n});\r\nlet loading = ref(false);\r\nconst columns = [\r\n  {\r\n    title: '车次编号',\r\n    dataIndex: 'trainCode',\r\n    key: 'trainCode',\r\n  },\r\n  {\r\n    title: '厢序',\r\n    dataIndex: 'carriageIndex',\r\n    key: 'carriageIndex',\r\n  },\r\n  {\r\n    title: '排号',\r\n    dataIndex: 'row',\r\n    key: 'row',\r\n  },\r\n  {\r\n    title: '列号',\r\n    dataIndex: 'col',\r\n    key: 'col',\r\n  },\r\n  {\r\n    title: '座位类型',\r\n    dataIndex: 'seatType',\r\n    key: 'seatType',\r\n  },\r\n  {\r\n    title: '同车厢座序',\r\n    dataIndex: 'carriageSeatIndex',\r\n    key: 'carriageSeatIndex',\r\n  },\r\n  {\r\n    title: '操作',\r\n    dataIndex: 'operation'\r\n  }\r\n];\r\n\r\nconst onAdd = () => {\r\n  trainSeat.value = {};\r\n  visible.value = true;\r\n};\r\n\r\nconst onEdit = (record) => {\r\n  trainSeat.value = JSON.parse(JSON.stringify(record))\r\n  visible.value = true;\r\n};\r\n\r\nconst onDelete = (record) => {\r\n  request.delete(\"/admin/train-seat/del/\" + record.id).then((res) => {\r\n\r\n    if (res.success) {\r\n      notification.success({description: \"删除成功！\"});\r\n      handleQuery({\r\n        page: pagination.value.current,\r\n        size: pagination.value.pageSize,\r\n      });\r\n    } else {\r\n      notification.error({description: res.msg});\r\n    }\r\n  });\r\n};\r\n\r\nconst handleOk = () => {\r\n  request.post(\"/admin/train-seat/save\", trainSeat.value).then((res) => {\r\n    if (res.success) {\r\n      notification.success({description: \"保存成功！\"});\r\n      visible.value = false;\r\n      handleQuery({\r\n        page: pagination.value.current,\r\n        size: pagination.value.pageSize\r\n      });\r\n\r\n    } else {\r\n      notification.error({description: res.msg});\r\n    }\r\n  });\r\n};\r\n\r\nconst handleQuery = (param) => {\r\n  if (!param) {\r\n    param = {\r\n      page: 1,\r\n      size: pagination.value.pageSize\r\n    };\r\n  }\r\n  loading.value = true;\r\n  request.get(\"/admin/train-seat/query-list\", {\r\n    params: {\r\n      pageNum: param.page,\r\n      pageSize: param.size\r\n    }\r\n  }).then((res) => {\r\n    loading.value = false;\r\n    if (res.success) {\r\n      trainSeats.value = res.data.list;\r\n      pagination.value.current = param.page;\r\n      pagination.value.total =res.data.total;\r\n    } else {\r\n      notification.error({description: res.msg});\r\n    }\r\n  });\r\n};\r\n\r\nconst handleTableChange = (page) => {\r\n  pagination.value.pageSize = page.pageSize;\r\n  handleQuery({\r\n    page: page.current,\r\n    size: page.pageSize\r\n  });\r\n};\r\n\r\nonMounted(() => {\r\n  handleQuery({\r\n    page: 1,\r\n    size: pagination.value.pageSize\r\n  });\r\n});\r\n</script>\r\n","import script from \"./TrainSeatView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TrainSeatView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["request","axios","create","baseURL","process","timeout","interceptors","use","config","error","console","Promise","reject","response","res","data","visible","ref","trainSeat","id","undefined","trainCode","carriageIndex","row","col","seatType","carriageSeatIndex","createTime","updateTime","SEAT_TYPE_ARRAY","type","desc","Cols","updateCols","get","then","success","value","trainSeats","pagination","total","current","pageSize","loading","columns","title","dataIndex","key","onAdd","onEdit","record","JSON","parse","stringify","onDelete","delete","notification","description","handleQuery","page","size","msg","handleOk","post","param","params","pageNum","list","handleTableChange","onMounted","__exports__"],"sourceRoot":""}