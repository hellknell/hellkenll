{"version":3,"file":"js/857.5ee1b5bc.js","mappings":"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","sources":["webpack://admin/./src/util/request.js","webpack://admin/./src/views/main/TrainCarriageView.vue","webpack://admin/./src/views/main/TrainCarriageView.vue?cdc6"],"sourcesContent":["import axios from 'axios'\r\n// import store from \"@/store\";\r\n// import {notification} from \"ant-design-vue\";\r\n// import router from \"@/router\";\r\n\r\n// 创建可一个新的axios对象\r\nconst request = axios.create({\r\n    baseURL: process.env.VUE_APP_BASEURL,   // 后端的接口地址  ip:port\r\n    timeout: 30000                          // 30s请求超时\r\n})\r\n\r\n// request 拦截器\r\n// 可以自请求发送前对请求做一些处理\r\n// 比如统一加token，对请求参数统一加密\r\nrequest.interceptors.request.use(config => {\r\n    // config.headers['Content-Type'] = 'application/json;charset=utf-8';\r\n    // let member = JSON.parse(localStorage.getItem('member')) || ''\r\n    // config.headers.token = member.token || '';\r\n    return config\r\n}, error => {\r\n    console.error('request error: ' + error) // for debug\r\n    return Promise.reject(error)\r\n});\r\n\r\n// response 拦截器\r\n// 可以在接口响应后统一处理结果\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n        // if (typeof res === 'string') {\r\n        //     res = res ? JSON.parse(res) : res\r\n        // }\r\n        // if (res.code === \"401\") {\r\n        //     store.commit(\"setMember\", {});\r\n        //     notification.error({\r\n        //         message: '错误',\r\n        //         description: '登录已过期，请重新登录',\r\n        //     })\r\n        //     router.push('/login')\r\n        // }\r\n        // return res;\r\n        return res\r\n    },\r\n    error => {\r\n        console.error('response error: ' + error) // for debug\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default request","<template>\r\n  <a-space direction=\"horizontal\" :size=\"10\" style=\"display: flex;justify-content: flex-start\">\r\n    <a-button type=\"primary\" danger @click=\"save\">新增</a-button>\r\n    <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\r\n  </a-space>\r\n\r\n  <a-table :dataSource=\"trainCarriages\"\r\n           :columns=\"columns\"\r\n           :pagination=\"pagination\"\r\n           @change=\"handleTableChange\"\r\n           :loading=\"loading\">\r\n    <template #bodyCell=\"{ column, record }\">\r\n      <template v-if=\"column.dataIndex === 'operation'\">\r\n        <a-space :size=\"15\">\r\n          <a-popconfirm title=\"确定要删除吗\" @confirm=\"del(record.id)\" ok-text=\"确认\"\r\n                        cancel-text=\"取消\">\r\n            <template #icon>\r\n              <question-circle-outlined style=\"color: red\"/>\r\n            </template>\r\n            <a style=\"color: red\" href=\"#\">删除</a>\r\n          </a-popconfirm>\r\n          <a-button size=\"small\" @click=\"save(record)\" type=\"primary\">\r\n            <template #icon>\r\n              <EditOutlined/>\r\n            </template>\r\n          </a-button>\r\n        </a-space>\r\n      </template>\r\n      <template v-else-if=\"column.dataIndex === 'seatType'\">\r\n\r\n        <a-tag color=\"pink\" v-if=\"'1'===record.seatType\">一等座</a-tag>\r\n        <a-tag color=\"red\" v-if=\"'2'===record.seatType\">二等座</a-tag>\r\n        <a-tag color=\"orange\" v-if=\"'3'===record.seatType\">硬卧</a-tag>\r\n        <a-tag color=\"green\" v-if=\"'4'===record.seatType\">软卧</a-tag>\r\n\r\n      </template>\r\n    </template>\r\n  </a-table>\r\n  <a-modal\r\n      v-model:visible=\"visible\"\r\n      title=\"火车信息\"\r\n      @ok=\"handleOk\"\r\n      ok-text=\"确认\"\r\n      cancel-text=\"取消\"\r\n      keyboard\r\n  >\r\n    <a-form :model=\"trainCarriage\" label-align=\"right\" :label-col=\"{span:6}\"\r\n            :wrapper-col=\"{span:18,offset:0}\">\r\n      <a-form-item has-feedback label=\"车次编号\" name=\"trainCode\">\r\n        <a-input v-model:value=\"trainCarriage.trainCode\"/>\r\n      </a-form-item>\r\n      <a-form-item has-feedback label=\"车厢号\" name=\"index\">\r\n        <a-input v-model:value=\"trainCarriage.index\"/>\r\n      </a-form-item>\r\n      <a-form-item has-feedback label=\"座位类型\" name=\"seatType\">\r\n        <a-radio-group v-model:value=\"trainCarriage.seatType\" :options=\"options\">\r\n        </a-radio-group>\r\n      </a-form-item>\r\n      <a-form-item has-feedback label=\"座位数\" name=\"seatCount\">\r\n        <a-input v-model:value=\"trainCarriage.seatCount\"/>\r\n      </a-form-item>\r\n      <a-form-item has-feedback label=\"排数\" name=\"rowCount\">\r\n        <a-input v-model:value=\"trainCarriage.rowCount\"/>\r\n      </a-form-item>\r\n      <a-form-item has-feedback label=\"列数\" name=\"colCount\">\r\n        <a-input v-model:value=\"trainCarriage.colCount\"/>\r\n      </a-form-item>\r\n    </a-form>\r\n  </a-modal>\r\n</template>\r\n\r\n<script setup>\r\nimport {onMounted, ref} from 'vue';\r\nimport request from \"@/util/request\";\r\nimport {message, notification} from \"ant-design-vue\";\r\nimport {EditOutlined, QuestionCircleOutlined} from \"@ant-design/icons-vue\";\r\n\r\nconst options = [{\r\n  value: '1',\r\n  label: '一等座',\r\n}, {\r\n  value: '2',\r\n  label: '二等座',\r\n}, {\r\n  value: '4',\r\n  label: '软卧',\r\n}, {\r\n  value: '3',\r\n  label: '硬卧',\r\n}]\r\n// const SEAT_TYPE_ARRAY = window.TrainSeat_TYPE_ARRAY;\r\nconst visible = ref(false);\r\nlet trainCarriage = ref({\r\n  id: undefined,\r\n  trainCode: undefined,\r\n  index: undefined,\r\n  seatType: undefined,\r\n  seatCount: undefined,\r\n  rowCount: undefined,\r\n  colCount: undefined,\r\n  createTime: undefined,\r\n  updateTime: undefined,\r\n});\r\nconst trainCarriages = ref([]);\r\n// 分页的三个属性名是固定的\r\nconst pagination = ref({\r\n  total: 0,\r\n  current: 1,\r\n  pageSize: 3,\r\n});\r\nlet loading = ref(false);\r\nconst columns = [\r\n  {\r\n    title: '车次编号',\r\n    dataIndex: 'trainCode',\r\n    key: 'trainCode',\r\n  },\r\n  {\r\n    title: '厢号',\r\n    dataIndex: 'index',\r\n    key: 'index',\r\n  },\r\n  {\r\n    title: '座位类型',\r\n    dataIndex: 'seatType',\r\n    key: 'seatType',\r\n  },\r\n  {\r\n    title: '座位数',\r\n    dataIndex: 'seatCount',\r\n    key: 'seatCount',\r\n  },\r\n  {\r\n    title: '排数',\r\n    dataIndex: 'rowCount',\r\n    key: 'rowCount',\r\n  },\r\n  {\r\n    title: '列数',\r\n    dataIndex: 'colCount',\r\n    key: 'colCount',\r\n  },\r\n  {\r\n    title: '操作',\r\n    dataIndex: 'operation'\r\n  },\r\n];\r\n\r\n\r\nconst handleQuery = (param) => {\r\n  if (!param) {\r\n    param = {\r\n      pageNum: 1,\r\n      pageSize: pagination.value.pageSize\r\n    };\r\n  }\r\n  loading.value = true;\r\n  request.get(\"/admin/train-carriage/query-list\", {\r\n    params: {\r\n      pageNum: param.pageNum,\r\n      pageSize: param.pageSize\r\n    }\r\n  }).then((res) => {\r\n    loading.value = false;\r\n\r\n    if (res.success) {\r\n      trainCarriages.value = res.data.list;\r\n      pagination.value.current = param.page;\r\n      pagination.value.total = res.data.total;\r\n    } else {\r\n      notification.error({description: res.msg});\r\n    }\r\n  });\r\n};\r\n\r\nconst handleTableChange = (page) => {\r\n  pagination.value.pageSize = page.pageSize;\r\n  handleQuery({\r\n    pageNum: page.current,\r\n    pageSize: page.pageSize\r\n  });\r\n};\r\n\r\nonMounted(() => {\r\n  handleQuery({\r\n    pageNum: 1,\r\n    pageSize: pagination.value.pageSize\r\n  });\r\n});\r\nconst del = (record) => {\r\n  request.delete(\"/admin/train-carriage/del/\" + record).then(res => {\r\n    if (res.success) {\r\n      message.success(\"删除成功\")\r\n      handleQuery()\r\n    } else {\r\n      notification.error({description: res.msg})\r\n    }\r\n  })\r\n}\r\nconst save = (data) => {\r\n  trainCarriage.value = JSON.parse(JSON.stringify(data))\r\n  visible.value = true\r\n}\r\nconst handleOk = () => {\r\n  request.post(\"/admin/train-carriage/save\", trainCarriage.value\r\n  ).then(res => {\r\n    if (res.code === '200') {\r\n      handleQuery()\r\n      message.success({content: \"操作成功\"})\r\n      trainCarriage.value = {}\r\n\r\n\r\n      visible.value = false;\r\n    } else {\r\n      notification.error({message: res.msg})\r\n    }\r\n  })\r\n}\r\n</script>\r\n","import script from \"./TrainCarriageView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TrainCarriageView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["request","axios","create","baseURL","process","timeout","interceptors","use","config","error","console","Promise","reject","response","res","data","options","value","label","visible","ref","trainCarriage","id","undefined","trainCode","index","seatType","seatCount","rowCount","colCount","createTime","updateTime","trainCarriages","pagination","total","current","pageSize","loading","columns","title","dataIndex","key","handleQuery","param","pageNum","get","params","then","success","list","page","notification","description","msg","handleTableChange","onMounted","del","record","delete","message","save","JSON","parse","stringify","handleOk","post","code","content","__exports__"],"sourceRoot":""}