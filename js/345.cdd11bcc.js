"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[345],{8073:function(e,a,t){var l=t(8355);const n=l.A.create({baseURL:"http://api.example.com",timeout:3e4});n.interceptors.request.use((e=>e),(e=>(console.error("request error: "+e),Promise.reject(e)))),n.interceptors.response.use((e=>{let a=e.data;return a}),(e=>(console.error("response error: "+e),Promise.reject(e)))),a.A=n},7345:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var l=t(6768),n=t(144),i=t(8073),u=t(5108),o=t(7694),d=t(1632),r=t(3784),s=t(7816),m=t(1576),v=t.n(m);const c=(0,l.Lk)("a",{style:{color:"red"},href:"#"},"删除",-1);var p={__name:"TrainStationView",setup(e){const a=(0,n.KR)(!1),t=(0,n.KR)({id:void 0,trainCode:void 0,index:void 0,name:void 0,namePinyin:void 0,inTime:void 0,outTime:void 0,stopTime:void 0,km:void 0,createTime:void 0,updateTime:void 0}),m=(0,n.KR)([]),p=(0,n.KR)([]),k=(0,n.KR)({total:0,current:1,pageSize:10});let b=(0,n.KR)(!1);const f=[{title:"车次编号",dataIndex:"trainCode",key:"trainCode"},{title:"站序",dataIndex:"index",key:"index"},{title:"站名",dataIndex:"name",key:"name"},{title:"站名拼音",dataIndex:"namePinyin",key:"namePinyin"},{title:"进站时间",dataIndex:"inTime",key:"inTime"},{title:"出站时间",dataIndex:"outTime",key:"outTime"},{title:"停站时长",dataIndex:"stopTime",key:"stopTime"},{title:"里程（公里）",dataIndex:"km",key:"km"},{title:"操作",dataIndex:"operation"}],g=()=>{i.A.get("/admin/train/query-train-code",{params:{code:t.value.trainCode}}).then((e=>{e.success&&(m.value=e.data)}))},y=e=>{e||(e={page:1,size:k.value.pageSize}),b.value=!0,i.A.get("/admin/train-station/query-list",{params:{pageNum:e.page,pageSize:e.size}}).then((a=>{b.value=!1,a.success?(p.value=a.data?.list,k.value.current=e.page,k.value.total=a.data?.total):u.A.error({description:a.msg})}))},F=e=>{k.value.pageSize=e.pageSize,y({page:e.current,size:e.pageSize})};(0,l.sV)((()=>{y({page:1,size:k.value.pageSize})}));const x=e=>{i.A.delete("/admin/train-station/del/"+e).then((e=>{e.success?(o.Ay.success("删除成功"),y()):u.A.error({description:e.msg})}))},h=e=>{t.value=JSON.parse(JSON.stringify(e)),a.value=!0},_=()=>{i.A.post("/admin/train-station/save",t.value).then((e=>{"200"===e.code?(o.Ay.success({content:"操作成功"}),a.value=!1,y({pageNum:k.value.current,pageSize:k.value.pageSize}),t.value={},y()):u.A.error({message:e.msg})}))};return(e,i)=>{const u=(0,l.g2)("a-button"),o=(0,l.g2)("a-space"),C=(0,l.g2)("a-popconfirm"),T=(0,l.g2)("a-table"),z=(0,l.g2)("a-auto-complete"),A=(0,l.g2)("a-form-item"),S=(0,l.g2)("a-input"),R=(0,l.g2)("a-time-picker"),I=(0,l.g2)("a-form"),U=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(o,{direction:"horizontal",size:10,style:{display:"flex","justify-content":"flex-start"}},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"primary",danger:"",onClick:i[0]||(i[0]=e=>a.value=!0)},{default:(0,l.k6)((()=>[(0,l.eW)("新增")])),_:1}),(0,l.bF)(u,{type:"primary",onClick:i[1]||(i[1]=e=>y())},{default:(0,l.k6)((()=>[(0,l.eW)("刷新")])),_:1})])),_:1}),(0,l.bF)(T,{dataSource:p.value,columns:f,pagination:k.value,onChange:F,loading:(0,n.R1)(b)},{bodyCell:(0,l.k6)((({column:e,record:a})=>["operation"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(o,{key:0,size:15},{default:(0,l.k6)((()=>[(0,l.bF)(C,{title:"确定要删除吗",onConfirm:e=>x(a.id),"ok-text":"确认","cancel-text":"取消"},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(d.A),{style:{color:"red"}})])),default:(0,l.k6)((()=>[c])),_:2},1032,["onConfirm"]),(0,l.bF)(u,{size:"small",onClick:e=>h(a),type:"primary"},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(r.A))])),_:2},1032,["onClick"])])),_:2},1024)):(0,l.Q3)("",!0)])),_:1},8,["dataSource","pagination","loading"]),(0,l.bF)(U,{visible:a.value,"onUpdate:visible":i[9]||(i[9]=e=>a.value=e),title:"火车信息",onOk:_,"ok-text":"确认","cancel-text":"取消",keyboard:""},{default:(0,l.k6)((()=>[(0,l.bF)(I,{model:t.value,"label-align":"right","label-col":{span:6},"wrapper-col":{span:18,offset:0}},{default:(0,l.k6)((()=>[(0,l.bF)(A,{"has-feedback":"",label:"车次编号",name:"trainCode"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{value:t.value.trainCode,"onUpdate:value":i[2]||(i[2]=e=>t.value.trainCode=e),options:m.value,onSearch:g},null,8,["value","options"])])),_:1}),(0,l.bF)(A,{"has-feedback":"",label:"站序",name:"index"},{default:(0,l.k6)((()=>[(0,l.bF)(S,{value:t.value.index,"onUpdate:value":i[3]||(i[3]=e=>t.value.index=e)},null,8,["value"])])),_:1}),(0,l.bF)(A,{"has-feedback":"",label:"站名拼音",name:"startPinyin"},{default:(0,l.k6)((()=>[(0,l.bF)(S,{value:t.value.namePinyin,"onUpdate:value":i[4]||(i[4]=e=>t.value.namePinyin=e)},null,8,["value"])])),_:1}),(0,l.bF)(A,{"has-feedback":"",label:"站名",name:"name"},{default:(0,l.k6)((()=>[(0,l.bF)(S,{value:t.value.name,"onUpdate:value":i[5]||(i[5]=e=>t.value.name=e)},null,8,["value"])])),_:1}),(0,l.bF)(A,{"has-feedback":"",label:"入站时间",name:"inTime"},{default:(0,l.k6)((()=>[(0,l.bF)(R,{value:t.value.inTime,"onUpdate:value":i[6]||(i[6]=e=>t.value.inTime=e),"value-format":"HH:mm:ss","default-value":(0,n.R1)(v())("00:00:00","HH:mm:ss")},{suffixIcon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(s.A))])),_:1},8,["value","default-value"])])),_:1}),(0,l.bF)(A,{"has-feedback":"",label:"出站时间",name:"outTime"},{default:(0,l.k6)((()=>[(0,l.bF)(R,{value:t.value.outTime,"onUpdate:value":i[7]||(i[7]=e=>t.value.outTime=e),"value-format":"HH:mm:ss","default-value":(0,n.R1)(v())("00:00:00","HH:mm:ss")},{suffixIcon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(s.A))])),_:1},8,["value","default-value"])])),_:1}),(0,l.bF)(A,{"has-feedback":"",label:"公里数",name:"km"},{default:(0,l.k6)((()=>[(0,l.bF)(S,{value:t.value.km,"onUpdate:value":i[8]||(i[8]=e=>t.value.km=e)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"])],64)}}};const k=p;var b=k}}]);
//# sourceMappingURL=345.cdd11bcc.js.map