"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[857],{8073:function(e,a,t){var l=t(8355);const o=l.A.create({baseURL:"http://api.example.com",timeout:3e4});o.interceptors.request.use((e=>e),(e=>(console.error("request error: "+e),Promise.reject(e)))),o.interceptors.response.use((e=>{let a=e.data;return a}),(e=>(console.error("response error: "+e),Promise.reject(e)))),a.A=o},7857:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var l=t(6768),o=t(144),n=t(8073),u=t(5108),r=t(7694),i=t(1632),d=t(3784);const s=(0,l.Lk)("a",{style:{color:"red"},href:"#"},"删除",-1);var c={__name:"TrainCarriageView",setup(e){const a=[{value:"1",label:"一等座"},{value:"2",label:"二等座"},{value:"4",label:"软卧"},{value:"3",label:"硬卧"}],t=(0,o.KR)(!1);let c=(0,o.KR)({id:void 0,trainCode:void 0,index:void 0,seatType:void 0,seatCount:void 0,rowCount:void 0,colCount:void 0,createTime:void 0,updateTime:void 0});const p=(0,o.KR)([]),v=(0,o.KR)({total:0,current:1,pageSize:3});let k=(0,o.KR)(!1);const b=[{title:"车次编号",dataIndex:"trainCode",key:"trainCode"},{title:"厢号",dataIndex:"index",key:"index"},{title:"座位类型",dataIndex:"seatType",key:"seatType"},{title:"座位数",dataIndex:"seatCount",key:"seatCount"},{title:"排数",dataIndex:"rowCount",key:"rowCount"},{title:"列数",dataIndex:"colCount",key:"colCount"},{title:"操作",dataIndex:"operation"}],g=e=>{e||(e={pageNum:1,pageSize:v.value.pageSize}),k.value=!0,n.A.get("/admin/train-carriage/query-list",{params:{pageNum:e.pageNum,pageSize:e.pageSize}}).then((a=>{k.value=!1,a.success?(p.value=a.data.list,v.value.current=e.page,v.value.total=a.data.total):u.A.error({description:a.msg})}))},m=e=>{v.value.pageSize=e.pageSize,g({pageNum:e.current,pageSize:e.pageSize})};(0,l.sV)((()=>{g({pageNum:1,pageSize:v.value.pageSize})}));const f=e=>{n.A.delete("/admin/train-carriage/del/"+e).then((e=>{e.success?(r.Ay.success("删除成功"),g()):u.A.error({description:e.msg})}))},y=e=>{c.value=JSON.parse(JSON.stringify(e)),t.value=!0},C=()=>{n.A.post("/admin/train-carriage/save",c.value).then((e=>{"200"===e.code?(g(),r.Ay.success({content:"操作成功"}),c.value={},t.value=!1):u.A.error({message:e.msg})}))};return(e,n)=>{const u=(0,l.g2)("a-button"),r=(0,l.g2)("a-space"),F=(0,l.g2)("a-popconfirm"),x=(0,l.g2)("a-tag"),R=(0,l.g2)("a-table"),_=(0,l.g2)("a-input"),h=(0,l.g2)("a-form-item"),z=(0,l.g2)("a-radio-group"),S=(0,l.g2)("a-form"),T=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(r,{direction:"horizontal",size:10,style:{display:"flex","justify-content":"flex-start"}},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"primary",danger:"",onClick:y},{default:(0,l.k6)((()=>[(0,l.eW)("新增")])),_:1}),(0,l.bF)(u,{type:"primary",onClick:n[0]||(n[0]=e=>g())},{default:(0,l.k6)((()=>[(0,l.eW)("刷新")])),_:1})])),_:1}),(0,l.bF)(R,{dataSource:p.value,columns:b,pagination:v.value,onChange:m,loading:(0,o.R1)(k)},{bodyCell:(0,l.k6)((({column:e,record:a})=>["operation"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(r,{key:0,size:15},{default:(0,l.k6)((()=>[(0,l.bF)(F,{title:"确定要删除吗",onConfirm:e=>f(a.id),"ok-text":"确认","cancel-text":"取消"},{icon:(0,l.k6)((()=>[(0,l.bF)((0,o.R1)(i.A),{style:{color:"red"}})])),default:(0,l.k6)((()=>[s])),_:2},1032,["onConfirm"]),(0,l.bF)(u,{size:"small",onClick:e=>y(a),type:"primary"},{icon:(0,l.k6)((()=>[(0,l.bF)((0,o.R1)(d.A))])),_:2},1032,["onClick"])])),_:2},1024)):"seatType"===e.dataIndex?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},["1"===a.seatType?((0,l.uX)(),(0,l.Wv)(x,{key:0,color:"pink"},{default:(0,l.k6)((()=>[(0,l.eW)("一等座")])),_:1})):(0,l.Q3)("",!0),"2"===a.seatType?((0,l.uX)(),(0,l.Wv)(x,{key:1,color:"red"},{default:(0,l.k6)((()=>[(0,l.eW)("二等座")])),_:1})):(0,l.Q3)("",!0),"3"===a.seatType?((0,l.uX)(),(0,l.Wv)(x,{key:2,color:"orange"},{default:(0,l.k6)((()=>[(0,l.eW)("硬卧")])),_:1})):(0,l.Q3)("",!0),"4"===a.seatType?((0,l.uX)(),(0,l.Wv)(x,{key:3,color:"green"},{default:(0,l.k6)((()=>[(0,l.eW)("软卧")])),_:1})):(0,l.Q3)("",!0)],64)):(0,l.Q3)("",!0)])),_:1},8,["dataSource","pagination","loading"]),(0,l.bF)(T,{visible:t.value,"onUpdate:visible":n[7]||(n[7]=e=>t.value=e),title:"火车信息",onOk:C,"ok-text":"确认","cancel-text":"取消",keyboard:""},{default:(0,l.k6)((()=>[(0,l.bF)(S,{model:(0,o.R1)(c),"label-align":"right","label-col":{span:6},"wrapper-col":{span:18,offset:0}},{default:(0,l.k6)((()=>[(0,l.bF)(h,{"has-feedback":"",label:"车次编号",name:"trainCode"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{value:(0,o.R1)(c).trainCode,"onUpdate:value":n[1]||(n[1]=e=>(0,o.R1)(c).trainCode=e)},null,8,["value"])])),_:1}),(0,l.bF)(h,{"has-feedback":"",label:"车厢号",name:"index"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{value:(0,o.R1)(c).index,"onUpdate:value":n[2]||(n[2]=e=>(0,o.R1)(c).index=e)},null,8,["value"])])),_:1}),(0,l.bF)(h,{"has-feedback":"",label:"座位类型",name:"seatType"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{value:(0,o.R1)(c).seatType,"onUpdate:value":n[3]||(n[3]=e=>(0,o.R1)(c).seatType=e),options:a},null,8,["value"])])),_:1}),(0,l.bF)(h,{"has-feedback":"",label:"座位数",name:"seatCount"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{value:(0,o.R1)(c).seatCount,"onUpdate:value":n[4]||(n[4]=e=>(0,o.R1)(c).seatCount=e)},null,8,["value"])])),_:1}),(0,l.bF)(h,{"has-feedback":"",label:"排数",name:"rowCount"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{value:(0,o.R1)(c).rowCount,"onUpdate:value":n[5]||(n[5]=e=>(0,o.R1)(c).rowCount=e)},null,8,["value"])])),_:1}),(0,l.bF)(h,{"has-feedback":"",label:"列数",name:"colCount"},{default:(0,l.k6)((()=>[(0,l.bF)(_,{value:(0,o.R1)(c).colCount,"onUpdate:value":n[6]||(n[6]=e=>(0,o.R1)(c).colCount=e)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"])],64)}}};const p=c;var v=p}}]);
//# sourceMappingURL=857.5ee1b5bc.js.map