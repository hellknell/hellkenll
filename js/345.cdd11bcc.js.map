{"version":3,"file":"js/345.cdd11bcc.js","mappings":"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","sources":["webpack://admin/./src/util/request.js","webpack://admin/./src/views/main/TrainStationView.vue","webpack://admin/./src/views/main/TrainStationView.vue?32d1"],"sourcesContent":["import axios from 'axios'\r\n// import store from \"@/store\";\r\n// import {notification} from \"ant-design-vue\";\r\n// import router from \"@/router\";\r\n\r\n// 创建可一个新的axios对象\r\nconst request = axios.create({\r\n    baseURL: process.env.VUE_APP_BASEURL,   // 后端的接口地址  ip:port\r\n    timeout: 30000                          // 30s请求超时\r\n})\r\n\r\n// request 拦截器\r\n// 可以自请求发送前对请求做一些处理\r\n// 比如统一加token，对请求参数统一加密\r\nrequest.interceptors.request.use(config => {\r\n    // config.headers['Content-Type'] = 'application/json;charset=utf-8';\r\n    // let member = JSON.parse(localStorage.getItem('member')) || ''\r\n    // config.headers.token = member.token || '';\r\n    return config\r\n}, error => {\r\n    console.error('request error: ' + error) // for debug\r\n    return Promise.reject(error)\r\n});\r\n\r\n// response 拦截器\r\n// 可以在接口响应后统一处理结果\r\nrequest.interceptors.response.use(\r\n    response => {\r\n        let res = response.data;\r\n        // if (typeof res === 'string') {\r\n        //     res = res ? JSON.parse(res) : res\r\n        // }\r\n        // if (res.code === \"401\") {\r\n        //     store.commit(\"setMember\", {});\r\n        //     notification.error({\r\n        //         message: '错误',\r\n        //         description: '登录已过期，请重新登录',\r\n        //     })\r\n        //     router.push('/login')\r\n        // }\r\n        // return res;\r\n        return res\r\n    },\r\n    error => {\r\n        console.error('response error: ' + error) // for debug\r\n        return Promise.reject(error)\r\n    }\r\n)\r\n\r\nexport default request","<template>\n  <a-space direction=\"horizontal\" :size=\"10\" style=\"display: flex;justify-content: flex-start\">\n    <a-button type=\"primary\" danger @click=\"visible=true\">新增</a-button>\n    <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\n  </a-space>\n  <a-table :dataSource=\"trainStations\"\n           :columns=\"columns\"\n           :pagination=\"pagination\"\n           @change=\"handleTableChange\"\n           :loading=\"loading\">\n    <template #bodyCell=\"{ column,record }\">\n      <template v-if=\"column.dataIndex === 'operation'\">\n        <a-space :size=\"15\">\n          <a-popconfirm title=\"确定要删除吗\" @confirm=\"del(record.id)\" ok-text=\"确认\"\n                        cancel-text=\"取消\">\n            <template #icon>\n              <question-circle-outlined style=\"color: red\"/>\n            </template>\n            <a style=\"color: red\" href=\"#\">删除</a>\n          </a-popconfirm>\n          <a-button size=\"small\" @click=\"save(record)\" type=\"primary\">\n            <template #icon>\n              <EditOutlined/>\n            </template>\n          </a-button>\n        </a-space>\n      </template>\n    </template>\n  </a-table>\n  <a-modal\n      v-model:visible=\"visible\"\n      title=\"火车信息\"\n      @ok=\"handleOk\"\n      ok-text=\"确认\"\n      cancel-text=\"取消\"\n      keyboard\n  >\n    <a-form :model=\"trainStation\" label-align=\"right\" :label-col=\"{span:6}\"\n            :wrapper-col=\"{span:18,offset:0}\">\n      <a-form-item has-feedback label=\"车次编号\" name=\"trainCode\">\n        <a-auto-complete\n            v-model:value=\"trainStation.trainCode\"\n            :options=\"trainCodes\"\n            @search=\"onSearch\"\n        />\n      </a-form-item>\n      <a-form-item has-feedback label=\"站序\" name=\"index\">\n        <a-input v-model:value=\"trainStation.index\"/>\n      </a-form-item>\n      <a-form-item has-feedback label=\"站名拼音\" name=\"startPinyin\">\n        <a-input v-model:value=\"trainStation.namePinyin\"/>\n      </a-form-item>\n      <a-form-item has-feedback label=\"站名\" name=\"name\">\n        <a-input v-model:value=\"trainStation.name\"/>\n      </a-form-item>\n      <a-form-item has-feedback label=\"入站时间\" name=\"inTime\">\n        <a-time-picker v-model:value=\"trainStation.inTime\" value-format=\"HH:mm:ss\"\n                       :default-value=\"dayjs('00:00:00', 'HH:mm:ss')\">\n          <template #suffixIcon>\n            <smile-outlined/>\n          </template>\n        </a-time-picker>\n      </a-form-item>\n      <a-form-item has-feedback label=\"出站时间\" name=\"outTime\">\n        <a-time-picker v-model:value=\"trainStation.outTime\" value-format=\"HH:mm:ss\"\n                       :default-value=\"dayjs('00:00:00', 'HH:mm:ss')\">\n          <template #suffixIcon>\n            <smile-outlined/>\n          </template>\n        </a-time-picker>\n      </a-form-item>\n      <a-form-item has-feedback label=\"公里数\" name=\"km\">\n        <a-input v-model:value=\"trainStation.km\"/>\n      </a-form-item>\n\n    </a-form>\n  </a-modal>\n</template>\n<script setup>\nimport {onMounted, ref,} from 'vue';\nimport request from \"@/util/request\";\nimport {message, notification} from \"ant-design-vue\";\nimport {EditOutlined, QuestionCircleOutlined, SmileOutlined} from \"@ant-design/icons-vue\";\nimport dayjs from \"dayjs\";\n\n\nconst visible = ref(false);\nconst trainStation = ref({\n  id: undefined,\n  trainCode: undefined,\n  index: undefined,\n  name: undefined,\n  namePinyin: undefined,\n  inTime: undefined,\n  outTime: undefined,\n  stopTime: undefined,\n  km: undefined,\n  createTime: undefined,\n  updateTime: undefined,\n});\nconst trainCodes= ref([]);\nconst trainStations = ref([]);\n// 分页的三个属性名是固定的\nconst pagination = ref({\n  total: 0,\n  current: 1,\n  pageSize: 10,\n});\nlet loading = ref(false);\nconst columns = [\n  {\n    title: '车次编号',\n    dataIndex: 'trainCode',\n    key: 'trainCode',\n  },\n  {\n    title: '站序',\n    dataIndex: 'index',\n    key: 'index',\n  },\n  {\n    title: '站名',\n    dataIndex: 'name',\n    key: 'name',\n  },\n  {\n    title: '站名拼音',\n    dataIndex: 'namePinyin',\n    key: 'namePinyin',\n  },\n  {\n    title: '进站时间',\n    dataIndex: 'inTime',\n    key: 'inTime',\n  },\n  {\n    title: '出站时间',\n    dataIndex: 'outTime',\n    key: 'outTime',\n  },\n  {\n    title: '停站时长',\n    dataIndex: 'stopTime',\n    key: 'stopTime',\n  },\n  {\n    title: '里程（公里）',\n    dataIndex: 'km',\n    key: 'km',\n  },\n  {\n    title: '操作',\n    dataIndex: 'operation'\n  },\n];\n\nconst onSearch=()=>{\n  request.get(\"/admin/train/query-train-code\",{\n    params:{\n      code:trainStation.value.trainCode\n    }\n  }).then(res=>{\n    if(res.success){\n      trainCodes.value=res.data\n    }\n\n  })\n}\n\nconst handleQuery = (param) => {\n  if (!param) {\n    param = {\n      page: 1,\n      size: pagination.value.pageSize\n    };\n  }\n  loading.value = true;\n  request.get(\"/admin/train-station/query-list\", {\n    params: {\n      pageNum: param.page,\n      pageSize: param.size\n    }\n  }).then((res) => {\n    loading.value = false\n    if (res.success) {\n      trainStations.value = res.data?.list;\n      pagination.value.current = param.page;\n      pagination.value.total = res.data?.total;\n    } else {\n      notification.error({description: res.msg});\n    }\n  });\n};\n\nconst handleTableChange = (page) => {\n  pagination.value.pageSize = page.pageSize;\n  handleQuery({\n    page: page.current,\n    size: page.pageSize\n  })\n};\nonMounted(() => {\n  // getTrainCodes()\n  handleQuery({\n    page: 1,\n    size: pagination.value.pageSize\n  });\n})\nconst del = (record) => {\n  request.delete(\"/admin/train-station/del/\" + record).then(res => {\n    if (res.success) {\n      message.success(\"删除成功\")\n      handleQuery()\n    } else {\n      notification.error({description: res.msg})\n    }\n  })\n}\nconst save = (data) => {\n  trainStation.value = JSON.parse(JSON.stringify(data))\n  visible.value = true\n}\nconst handleOk = () => {\n  request.post(\"/admin/train-station/save\", trainStation.value\n  ).then(res => {\n    if (res.code === '200') {\n      message.success({content: \"操作成功\"})\n      visible.value = false;\n      handleQuery({\n        pageNum: pagination.value.current,\n        pageSize: pagination.value.pageSize\n      })\n      trainStation.value = {}\n      handleQuery()\n    } else {\n      notification.error({message: res.msg})\n    }\n  })\n}\n</script>\n","import script from \"./TrainStationView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TrainStationView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["request","axios","create","baseURL","process","timeout","interceptors","use","config","error","console","Promise","reject","response","res","data","visible","ref","trainStation","id","undefined","trainCode","index","name","namePinyin","inTime","outTime","stopTime","km","createTime","updateTime","trainCodes","trainStations","pagination","total","current","pageSize","loading","columns","title","dataIndex","key","onSearch","get","params","code","value","then","success","handleQuery","param","page","size","pageNum","list","notification","description","msg","handleTableChange","onMounted","del","record","delete","message","save","JSON","parse","stringify","handleOk","post","content","__exports__"],"sourceRoot":""}