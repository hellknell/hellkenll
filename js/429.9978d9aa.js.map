{"version":3,"file":"js/429.9978d9aa.js","mappings":"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","sources":["webpack://admin/./src/views/main/TrainView.vue","webpack://admin/./src/views/main/TrainView.vue?67f3"],"sourcesContent":["<template>\n  <p>\n    <a-space style=\"display: flex;justify-content:flex-start\">\n      <a-button type=\"primary\" @click=\"handleQuery()\">刷新</a-button>\n      <a-button type=\"primary\" danger @click=\"visible=true\">新增</a-button>\n    </a-space>\n  </p>\n  <a-table :dataSource=\"trains\"\n           :columns=\"columns\"\n           :pagination=\"pagination\"\n           @change=\"handleTableChange\"\n           :loading=\"loading\">\n    <template #bodyCell=\"{ column, record }\">\n      <template v-if=\"column.dataIndex === 'operation'\">\n      </template>\n      <template v-else-if=\"column.dataIndex === 'type'\">\n        <span v-for=\"item in TRAIN_TYPE_ARRAY\" :key=\"item.value\">\n          <span v-if=\"item.value === record.type\">\n            {{ item.label }}\n          </span>\n        </span>\n      </template>\n      <template v-if=\"column.dataIndex === 'operation'\">\n        <a-space :size=\"15\">\n          <a-popconfirm title=\"确定要删除吗\" @confirm=\"del(record.id)\" ok-text=\"确认\"\n                        cancel-text=\"取消\">\n            <template #icon>\n              <question-circle-outlined style=\"color: red\"/>\n            </template>\n            <a style=\"color: red\" href=\"#\">删除</a>\n          </a-popconfirm>\n          <a-button size=\"small\" @click=\"save(record)\" type=\"primary\">\n            <template #icon>\n              <EditOutlined/>\n            </template>\n          </a-button>\n        </a-space>\n      </template>\n    </template>\n  </a-table>\n\n  <a-modal\n      v-model:visible=\"visible\"\n      title=\"火车信息\"\n      @ok=\"handleOk\"\n      ok-text=\"确认\"\n      cancel-text=\"取消\"\n      keyboard\n  >\n    <a-form :model=\"train\" label-align=\"right\" :rules=\"rules\" :label-col=\"{span:6}\"\n            :wrapper-col=\"{span:18,offset:0}\">\n      <a-form-item has-feedback label=\"车次编号\" name=\"code\">\n        <a-input v-model:value=\"train.code\"/>\n      </a-form-item>\n      <a-form-item has-feedback label=\"车次类型\" name=\"type\">\n        <a-select\n            ref=\"select\"\n            v-model:value=\"train.type\"\n        >\n          <a-select-option  v-for=\"(item,index) in [{code:0,name:'高铁'},{code:1,name:'动车'},{code:2,name:'快速'}]\" :key=\"index\" :value=\"item.code\" >{{item.name}}</a-select-option>\n        </a-select>\n      </a-form-item>\n      <a-form-item has-feedback label=\"始发站\" name=\"start\">\n        <a-input v-model:value=\"train.start\"/>\n      </a-form-item>\n      <a-form-item has-feedback label=\"始发站拼音\" name=\"startPinyin\">\n        <a-input v-model:value=\"train.startPinyin\" disabled/>\n      </a-form-item>\n      <a-form-item has-feedback label=\"终点站\" name=\"end\">\n        <a-input v-model:value=\"train.end\"/>\n      </a-form-item>\n      <a-form-item has-feedback label=\"终点站拼音\" name=\"endPinyin\">\n        <a-input v-model:value=\"train.endPinyin\" disabled />\n      </a-form-item>\n      <a-form-item has-feedback label=\"出发时间\" name=\"startTime\">\n        <a-time-picker v-model:value=\"train.startTime\" value-format=\"HH:mm:ss\" />\n      </a-form-item>\n      <a-form-item has-feedback label=\"到站时间\" name=\"endTime\">\n        <a-time-picker v-model:value=\"train.endTime\" value-format=\"HH:mm:ss\" />\n      </a-form-item>\n    </a-form>\n  </a-modal>\n</template>\n\n<script setup>\nimport {onMounted, reactive, ref, watch} from 'vue';\nimport request from \"@/util/request\";\nimport {message, notification} from \"ant-design-vue\";\nimport {EditOutlined, QuestionCircleOutlined} from \"@ant-design/icons-vue\";\nimport {pinyin} from \"pinyin-pro\"\n\nconst TRAIN_TYPE_ARRAY = reactive([\n  {value: '0', label: '高铁'},\n  {value: '1', label: '动车'},\n  {value: '2', label: '普速'},\n])\nconst visible = ref(false);\n\nlet train = ref({\n  id: undefined,\n  code: undefined,\n  type: undefined,\n  start: undefined,\n  startPinyin: undefined,\n  startTime: undefined,\n  end: undefined,\n  endPinyin: undefined,\n  endTime: undefined,\n  createTime: undefined,\n  updateTime: undefined,\n});\nconst trains = ref([]);\n// 分页的三个属性名是固定的\nconst pagination = ref({\n  total: 0,\n  current: 1,\n  pageSize: 10,\n});\nlet loading = ref(false);\nconst columns = [\n  {\n    title: '车次编号',\n    dataIndex: 'code',\n    key: 'code',\n  },\n  {\n    title: '车次类型',\n    dataIndex: 'type',\n    key: 'type',\n  },\n  {\n    title: '始发站',\n    dataIndex: 'start',\n    key: 'start',\n  },\n  {\n    title: '始发站拼音',\n    dataIndex: 'startPinyin',\n    key: 'startPinyin',\n  },\n  {\n    title: '出发时间',\n    dataIndex: 'startTime',\n    key: 'startTime',\n  },\n  {\n    title: '终点站',\n    dataIndex: 'end',\n    key: 'end',\n  },\n  {\n    title: '终点站拼音',\n    dataIndex: 'endPinyin',\n    key: 'endPinyin',\n  },\n  {\n    title: '到站时间',\n    dataIndex: 'endTime',\n    key: 'endTime',\n  },\n  {\n    title: '操作',\n    dataIndex: 'operation'\n  },\n];\nwatch([()=>train.value.start,()=>train.value.end], () => {\n\n    train.value.startPinyin= train.value.start? pinyin(train.value.start, {toneType: 'none'}).replaceAll(\" \", \"\"):\"\"\n    train.value.endPinyin = train.value.end?pinyin(train.value.end, {toneType:'none'}).replaceAll(\" \", \"\"):\"\"\n})\nconst handleQuery = (param) => {\n  if (!param) {\n    param = {\n      pageNum: 1,\n      pageSize: pagination.value.pageSize\n    };\n  }\n  loading.value = true;\n  request.get(\"/admin/train/query-list\", {\n    params: {\n      pageNum: param.pageNum,\n      pageSize: param.pageSize\n    }\n  }).then((res) => {\n    loading.value = false\n    if (res.success) {\n      trains.value = res.data?.list;\n      pagination.value.current = param.page;\n      pagination.value.total = res.data?.total;\n    } else {\n      notification.error({description: res.msg});\n    }\n  });\n};\n\nconst handleTableChange = (page) => {\n  pagination.value.pageSize = page.pageSize;\n  handleQuery({\n    pageNum: page.current,\n    pageSize: page.pageSize\n  });\n};\n\nonMounted(() => {\n  handleQuery({\n    pageNum: 1,\n    pageSize: pagination.value.pageSize\n  });\n})\n\nconst del = (record) => {\n  request.delete(\"/admin/train/del/\" + record).then(res => {\n    if (res.success) {\n      message.success(\"删除成功\")\n      handleQuery()\n    } else {\n      notification.error({description: res.msg})\n    }\n  })\n\n}\nconst save = (data) => {\n  train.value = JSON.parse(JSON.stringify(data))\n  visible.value = true\n}\nconst handleOk = () => {\n\n  request.post(\"/admin/train/save\", train.value\n  ).then(res => {\n    if (res.code === '200') {\n      message.success({content: \"操作成功\"})\n      visible.value = false;\n      handleQuery()\n      train.value = {}\n\n\n    } else {\n      notification.error({message: res.msg})\n    }\n  })\n\n}\n</script>\n","import script from \"./TrainView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TrainView.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["TRAIN_TYPE_ARRAY","reactive","value","label","visible","ref","train","id","undefined","code","type","start","startPinyin","startTime","end","endPinyin","endTime","createTime","updateTime","trains","pagination","total","current","pageSize","loading","columns","title","dataIndex","key","watch","pinyin","toneType","replaceAll","handleQuery","param","pageNum","request","get","params","then","res","success","data","list","page","notification","error","description","msg","handleTableChange","onMounted","del","record","delete","message","save","JSON","parse","stringify","handleOk","post","content","__exports__"],"sourceRoot":""}