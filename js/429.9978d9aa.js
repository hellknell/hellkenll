"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[429],{7429:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=t(6768),n=t(144),i=t(4232),d=t(8073),u=t(5108),o=t(7694),s=t(1632),r=t(3784),v=t(2954);const c={key:0},p=(0,l.Lk)("a",{style:{color:"red"},href:"#"},"删除",-1);var m={__name:"TrainView",setup(e){const a=(0,n.Kh)([{value:"0",label:"高铁"},{value:"1",label:"动车"},{value:"2",label:"普速"}]),t=(0,n.KR)(!1);let m=(0,n.KR)({id:void 0,code:void 0,type:void 0,start:void 0,startPinyin:void 0,startTime:void 0,end:void 0,endPinyin:void 0,endTime:void 0,createTime:void 0,updateTime:void 0});const b=(0,n.KR)([]),k=(0,n.KR)({total:0,current:1,pageSize:10});let y=(0,n.KR)(!1);const f=[{title:"车次编号",dataIndex:"code",key:"code"},{title:"车次类型",dataIndex:"type",key:"type"},{title:"始发站",dataIndex:"start",key:"start"},{title:"始发站拼音",dataIndex:"startPinyin",key:"startPinyin"},{title:"出发时间",dataIndex:"startTime",key:"startTime"},{title:"终点站",dataIndex:"end",key:"end"},{title:"终点站拼音",dataIndex:"endPinyin",key:"endPinyin"},{title:"到站时间",dataIndex:"endTime",key:"endTime"},{title:"操作",dataIndex:"operation"}];(0,l.wB)([()=>m.value.start,()=>m.value.end],(()=>{m.value.startPinyin=m.value.start?(0,v.iA)(m.value.start,{toneType:"none"}).replaceAll(" ",""):"",m.value.endPinyin=m.value.end?(0,v.iA)(m.value.end,{toneType:"none"}).replaceAll(" ",""):""}));const g=e=>{e||(e={pageNum:1,pageSize:k.value.pageSize}),y.value=!0,d.A.get("/admin/train/query-list",{params:{pageNum:e.pageNum,pageSize:e.pageSize}}).then((a=>{y.value=!1,a.success?(b.value=a.data?.list,k.value.current=e.page,k.value.total=a.data?.total):u.A.error({description:a.msg})}))},F=e=>{k.value.pageSize=e.pageSize,g({pageNum:e.current,pageSize:e.pageSize})};(0,l.sV)((()=>{g({pageNum:1,pageSize:k.value.pageSize})}));const R=e=>{d.A.delete("/admin/train/del/"+e).then((e=>{e.success?(o.Ay.success("删除成功"),g()):u.A.error({description:e.msg})}))},_=e=>{m.value=JSON.parse(JSON.stringify(e)),t.value=!0},h=()=>{d.A.post("/admin/train/save",m.value).then((e=>{"200"===e.code?(o.Ay.success({content:"操作成功"}),t.value=!1,g(),m.value={}):u.A.error({message:e.msg})}))};return(e,d)=>{const u=(0,l.g2)("a-button"),o=(0,l.g2)("a-space"),v=(0,l.g2)("a-popconfirm"),x=(0,l.g2)("a-table"),T=(0,l.g2)("a-input"),C=(0,l.g2)("a-form-item"),S=(0,l.g2)("a-select-option"),A=(0,l.g2)("a-select"),I=(0,l.g2)("a-time-picker"),P=(0,l.g2)("a-form"),z=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("p",null,[(0,l.bF)(o,{style:{display:"flex","justify-content":"flex-start"}},{default:(0,l.k6)((()=>[(0,l.bF)(u,{type:"primary",onClick:d[0]||(d[0]=e=>g())},{default:(0,l.k6)((()=>[(0,l.eW)("刷新")])),_:1}),(0,l.bF)(u,{type:"primary",danger:"",onClick:d[1]||(d[1]=e=>t.value=!0)},{default:(0,l.k6)((()=>[(0,l.eW)("新增")])),_:1})])),_:1})]),(0,l.bF)(x,{dataSource:b.value,columns:f,pagination:k.value,onChange:F,loading:(0,n.R1)(y)},{bodyCell:(0,l.k6)((({column:e,record:t})=>["operation"===e.dataIndex?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[],64)):"type"===e.dataIndex?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(a,(e=>((0,l.uX)(),(0,l.CE)("span",{key:e.value},[e.value===t.type?((0,l.uX)(),(0,l.CE)("span",c,(0,i.v_)(e.label),1)):(0,l.Q3)("",!0)])))),128)):(0,l.Q3)("",!0),"operation"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(o,{key:2,size:15},{default:(0,l.k6)((()=>[(0,l.bF)(v,{title:"确定要删除吗",onConfirm:e=>R(t.id),"ok-text":"确认","cancel-text":"取消"},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(s.A),{style:{color:"red"}})])),default:(0,l.k6)((()=>[p])),_:2},1032,["onConfirm"]),(0,l.bF)(u,{size:"small",onClick:e=>_(t),type:"primary"},{icon:(0,l.k6)((()=>[(0,l.bF)((0,n.R1)(r.A))])),_:2},1032,["onClick"])])),_:2},1024)):(0,l.Q3)("",!0)])),_:1},8,["dataSource","pagination","loading"]),(0,l.bF)(z,{visible:t.value,"onUpdate:visible":d[10]||(d[10]=e=>t.value=e),title:"火车信息",onOk:h,"ok-text":"确认","cancel-text":"取消",keyboard:""},{default:(0,l.k6)((()=>[(0,l.bF)(P,{model:(0,n.R1)(m),"label-align":"right",rules:e.rules,"label-col":{span:6},"wrapper-col":{span:18,offset:0}},{default:(0,l.k6)((()=>[(0,l.bF)(C,{"has-feedback":"",label:"车次编号",name:"code"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{value:(0,n.R1)(m).code,"onUpdate:value":d[2]||(d[2]=e=>(0,n.R1)(m).code=e)},null,8,["value"])])),_:1}),(0,l.bF)(C,{"has-feedback":"",label:"车次类型",name:"type"},{default:(0,l.k6)((()=>[(0,l.bF)(A,{ref:"select",value:(0,n.R1)(m).type,"onUpdate:value":d[3]||(d[3]=e=>(0,n.R1)(m).type=e)},{default:(0,l.k6)((()=>[((0,l.uX)(),(0,l.CE)(l.FK,null,(0,l.pI)([{code:0,name:"高铁"},{code:1,name:"动车"},{code:2,name:"快速"}],((e,a)=>(0,l.bF)(S,{key:a,value:e.code},{default:(0,l.k6)((()=>[(0,l.eW)((0,i.v_)(e.name),1)])),_:2},1032,["value"]))),64))])),_:1},8,["value"])])),_:1}),(0,l.bF)(C,{"has-feedback":"",label:"始发站",name:"start"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{value:(0,n.R1)(m).start,"onUpdate:value":d[4]||(d[4]=e=>(0,n.R1)(m).start=e)},null,8,["value"])])),_:1}),(0,l.bF)(C,{"has-feedback":"",label:"始发站拼音",name:"startPinyin"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{value:(0,n.R1)(m).startPinyin,"onUpdate:value":d[5]||(d[5]=e=>(0,n.R1)(m).startPinyin=e),disabled:""},null,8,["value"])])),_:1}),(0,l.bF)(C,{"has-feedback":"",label:"终点站",name:"end"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{value:(0,n.R1)(m).end,"onUpdate:value":d[6]||(d[6]=e=>(0,n.R1)(m).end=e)},null,8,["value"])])),_:1}),(0,l.bF)(C,{"has-feedback":"",label:"终点站拼音",name:"endPinyin"},{default:(0,l.k6)((()=>[(0,l.bF)(T,{value:(0,n.R1)(m).endPinyin,"onUpdate:value":d[7]||(d[7]=e=>(0,n.R1)(m).endPinyin=e),disabled:""},null,8,["value"])])),_:1}),(0,l.bF)(C,{"has-feedback":"",label:"出发时间",name:"startTime"},{default:(0,l.k6)((()=>[(0,l.bF)(I,{value:(0,n.R1)(m).startTime,"onUpdate:value":d[8]||(d[8]=e=>(0,n.R1)(m).startTime=e),"value-format":"HH:mm:ss"},null,8,["value"])])),_:1}),(0,l.bF)(C,{"has-feedback":"",label:"到站时间",name:"endTime"},{default:(0,l.k6)((()=>[(0,l.bF)(I,{value:(0,n.R1)(m).endTime,"onUpdate:value":d[9]||(d[9]=e=>(0,n.R1)(m).endTime=e),"value-format":"HH:mm:ss"},null,8,["value"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["visible"])],64)}}};const b=m;var k=b}}]);
//# sourceMappingURL=429.9978d9aa.js.map