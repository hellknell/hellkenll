"use strict";(self["webpackChunkadmin"]=self["webpackChunkadmin"]||[]).push([[511],{8073:function(e,a,t){var l=t(8355);const n=l.A.create({baseURL:"http://api.example.com",timeout:3e4});n.interceptors.request.use((e=>e),(e=>(console.error("request error: "+e),Promise.reject(e)))),n.interceptors.response.use((e=>{let a=e.data;return a}),(e=>(console.error("response error: "+e),Promise.reject(e)))),a.A=n},9511:function(e,a,t){t.r(a),t.d(a,{default:function(){return v}});var l=t(6768),n=t(144),r=t(4232),u=t(8073),i=t(5108);const o=(0,l.Lk)("a",{style:{color:"red"}},"删除",-1),d=["onClick"],s={key:0};var c={__name:"TrainSeatView",setup(e){const a=(0,n.KR)(!1);let t=(0,n.KR)({id:void 0,trainCode:void 0,carriageIndex:void 0,row:void 0,col:void 0,seatType:void 0,carriageSeatIndex:void 0,createTime:void 0,updateTime:void 0});const c=(0,n.KR)([{type:"1",desc:"一等座"},{type:"2",desc:"二等座"},{type:"3",desc:"硬卧"},{type:"4",desc:"软卧"}]),p=(0,n.KR)([]),v=e=>{u.A.get("/admin/train-seat/query-seat-col/"+e).then((e=>{e.success&&(p.value=e.data)}))},g=(0,n.KR)([]),k=(0,n.KR)({total:0,current:1,pageSize:10});let y=(0,n.KR)(!1);const b=[{title:"车次编号",dataIndex:"trainCode",key:"trainCode"},{title:"厢序",dataIndex:"carriageIndex",key:"carriageIndex"},{title:"排号",dataIndex:"row",key:"row"},{title:"列号",dataIndex:"col",key:"col"},{title:"座位类型",dataIndex:"seatType",key:"seatType"},{title:"同车厢座序",dataIndex:"carriageSeatIndex",key:"carriageSeatIndex"},{title:"操作",dataIndex:"operation"}],f=()=>{t.value={},a.value=!0},m=e=>{t.value=JSON.parse(JSON.stringify(e)),a.value=!0},x=e=>{u.A.delete("/admin/train-seat/del/"+e.id).then((e=>{e.success?(i.A.success({description:"删除成功！"}),F({page:k.value.current,size:k.value.pageSize})):i.A.error({description:e.msg})}))},R=()=>{u.A.post("/admin/train-seat/save",t.value).then((e=>{e.success?(i.A.success({description:"保存成功！"}),a.value=!1,F({page:k.value.current,size:k.value.pageSize})):i.A.error({description:e.msg})}))},F=e=>{e||(e={page:1,size:k.value.pageSize}),y.value=!0,u.A.get("/admin/train-seat/query-list",{params:{pageNum:e.page,pageSize:e.size}}).then((a=>{y.value=!1,a.success?(g.value=a.data.list,k.value.current=e.page,k.value.total=a.data.total):i.A.error({description:a.msg})}))},_=e=>{k.value.pageSize=e.pageSize,F({page:e.current,size:e.pageSize})};return(0,l.sV)((()=>{F({page:1,size:k.value.pageSize})})),(e,u)=>{const i=(0,l.g2)("a-button"),C=(0,l.g2)("a-space"),I=(0,l.g2)("a-popconfirm"),S=(0,l.g2)("a-table"),z=(0,l.g2)("a-input"),T=(0,l.g2)("a-form-item"),A=(0,l.g2)("a-select-option"),K=(0,l.g2)("a-select"),h=(0,l.g2)("a-form"),w=(0,l.g2)("a-modal");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("p",null,[(0,l.bF)(C,{size:14,style:{display:"flex","justify-content":"flex-start"}},{default:(0,l.k6)((()=>[(0,l.bF)(i,{type:"primary",onClick:u[0]||(u[0]=e=>F())},{default:(0,l.k6)((()=>[(0,l.eW)("刷新")])),_:1}),(0,l.bF)(i,{type:"primary",danger:"",onClick:f},{default:(0,l.k6)((()=>[(0,l.eW)("新增")])),_:1})])),_:1})]),(0,l.bF)(S,{dataSource:g.value,columns:b,pagination:k.value,onChange:_,loading:(0,n.R1)(y)},{bodyCell:(0,l.k6)((({column:e,record:a})=>["operation"===e.dataIndex?((0,l.uX)(),(0,l.Wv)(C,{key:0},{default:(0,l.k6)((()=>[(0,l.bF)(I,{title:"删除后不可恢复，确认删除?",onConfirm:e=>x(a),"ok-text":"确认","cancel-text":"取消"},{default:(0,l.k6)((()=>[o])),_:2},1032,["onConfirm"]),(0,l.Lk)("a",{onClick:e=>m(a)},"编辑",8,d)])),_:2},1024)):"seatType"===e.dataIndex?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:1},(0,l.pI)(c.value,(e=>((0,l.uX)(),(0,l.CE)("span",{key:e},[e.type===a.seatType?((0,l.uX)(),(0,l.CE)("span",s,(0,r.v_)(e.desc),1)):(0,l.Q3)("",!0)])))),128)):(0,l.Q3)("",!0)])),_:1},8,["dataSource","pagination","loading"]),(0,l.bF)(w,{visible:a.value,"onUpdate:visible":u[8]||(u[8]=e=>a.value=e),title:"座位",onOk:R,"ok-text":"确认","cancel-text":"取消"},{default:(0,l.k6)((()=>[(0,l.bF)(h,{model:(0,n.R1)(t),"label-col":{span:4},"wrapper-col":{span:20}},{default:(0,l.k6)((()=>[(0,l.bF)(T,{label:"车次编号"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{value:(0,n.R1)(t).trainCode,"onUpdate:value":u[1]||(u[1]=e=>(0,n.R1)(t).trainCode=e)},null,8,["value"])])),_:1}),(0,l.bF)(T,{label:"厢序"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{value:(0,n.R1)(t).carriageIndex,"onUpdate:value":u[2]||(u[2]=e=>(0,n.R1)(t).carriageIndex=e)},null,8,["value"])])),_:1}),(0,l.bF)(T,{label:"座位类型"},{default:(0,l.k6)((()=>[(0,l.bF)(K,{value:(0,n.R1)(t).seatType,"onUpdate:value":u[3]||(u[3]=e=>(0,n.R1)(t).seatType=e),onChange:u[4]||(u[4]=e=>v((0,n.R1)(t).seatType))},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(c.value,((e,a)=>((0,l.uX)(),(0,l.Wv)(A,{key:a,value:e.type},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e.desc),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),(0,l.bF)(T,{label:"排号"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{value:(0,n.R1)(t).row,"onUpdate:value":u[5]||(u[5]=e=>(0,n.R1)(t).row=e),disabled:"3"===(0,n.R1)(t).seatType||"4"===(0,n.R1)(t).seatType},null,8,["value","disabled"])])),_:1}),(0,l.bF)(T,{label:"列号"},{default:(0,l.k6)((()=>[(0,l.bF)(K,{value:(0,n.R1)(t).col,"onUpdate:value":u[6]||(u[6]=e=>(0,n.R1)(t).col=e)},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(p.value,(e=>((0,l.uX)(),(0,l.Wv)(A,{key:e,value:e},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(e),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value"])])),_:1}),(0,l.bF)(T,{label:"同车厢座序"},{default:(0,l.k6)((()=>[(0,l.bF)(z,{value:(0,n.R1)(t).carriageSeatIndex,"onUpdate:value":u[7]||(u[7]=e=>(0,n.R1)(t).carriageSeatIndex=e)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible"])],64)}}};const p=c;var v=p}}]);
//# sourceMappingURL=511.18a847d6.js.map